---
title: Configuration
description: Complete guide to configuring your Sniff agents
---

# Configuration

Your agents are defined in a `sniff.yml` file. This guide covers all configuration options.

## Basic Structure

```yaml
version: '1.0'

agents:
  - id: 'my-agent'
    name: 'My Agent'
    description: 'What this agent does'
    system_prompt: |
      Instructions for your agent...
    model:
      anthropic:
        name: 'claude-sonnet-4-20250514'
        temperature: 0.7
        max_tokens: 2000
```

## Environment Variables

Credentials come from environment variables, not the YAML file:

| Variable                | Required | Description                 |
| ----------------------- | -------- | --------------------------- |
| `LINEAR_ACCESS_TOKEN`   | Yes      | Linear API token            |
| `ANTHROPIC_API_KEY`     | Yes      | Anthropic API key           |
| `LINEAR_WEBHOOK_SECRET` | No       | Webhook signing secret      |
| `PORT`                  | No       | Server port (default: 3000) |

### Variable Interpolation

Use `${VAR_NAME}` syntax for values that should come from environment:

```yaml
mcp_servers:
  - type: url
    url: 'https://api.example.com/mcp'
    name: 'Example MCP'
    authorization_token: '${EXAMPLE_API_KEY}'
```

Syntax options:

- `${VAR_NAME}` - Required (error if not set)
- `${VAR_NAME:-default}` - Optional with default value

## Agent Fields

### `id` (required)

Unique identifier. Lowercase letters, numbers, and hyphens only.

```yaml
id: 'triage-bot'
```

**Rules:** 1-50 characters, pattern `^[a-z0-9-]+$`

### `name` (required)

Display name shown in Linear.

```yaml
name: 'Triage Assistant'
```

**Rules:** 1-100 characters

### `description` (optional)

Brief description of the agent's purpose.

```yaml
description: 'Classifies and prioritizes incoming issues'
```

**Rules:** 0-500 characters

### `system_prompt` (required)

Core instructions that define your agent's behavior.

```yaml
system_prompt: |
  You are a triage specialist for a development team.

  When analyzing an issue:
  1. Classify as BUG/FEATURE/QUESTION/TASK
  2. Set priority P0-P3
  3. Provide clear reasoning

  Respond in markdown format.
```

<Tip>Use YAML's `|` syntax for multi-line prompts. Be specific about output format.</Tip>

## Model Configuration

All model options go under `model.anthropic`:

```yaml
model:
  anthropic:
    name: 'claude-sonnet-4-20250514'
    temperature: 0.7
    max_tokens: 2000
```

### Available Models

| Model                       | Best For               | Speed     |
| --------------------------- | ---------------------- | --------- |
| `claude-sonnet-4-20250514`  | Balanced (recommended) | Fast      |
| `claude-haiku-4-5-20251001` | Quick responses        | Very Fast |
| `claude-opus-4-20250514`    | Complex reasoning      | Slower    |

### `temperature`

Controls randomness. Lower = more deterministic.

- `0.0-0.3` - Consistent (triage, classification)
- `0.4-0.7` - Balanced (default)
- `0.8-1.0` - Creative

### `max_tokens`

Maximum response length.

- Short: 500-1000
- Medium: 1000-2000
- Long: 3000-4000
- Maximum: 8192

### `thinking` (optional)

Enable extended thinking for complex analysis:

```yaml
model:
  anthropic:
    thinking:
      type: 'enabled'
      budget_tokens: 2000
```

<Note>When thinking is enabled, `temperature` must be `1`.</Note>

## Tools

Give your agent capabilities beyond text analysis.

### Web Search

```yaml
tools:
  - type: web_search_20250305
    name: web_search
    max_uses: 10
    allowed_domains:
      - 'docs.example.com'
    blocked_domains:
      - 'spam.com'
```

### Web Fetch

```yaml
tools:
  - type: web_fetch_20250910
    name: web_fetch
    max_uses: 10
    citations:
      enabled: true
```

## MCP Servers

Connect external tools via Model Context Protocol:

```yaml
mcp_servers:
  - type: url
    url: 'https://api.example.com/mcp'
    name: 'My Integration'
    authorization_token: '${API_KEY}'
    tool_configuration:
      allowed_tools:
        - 'get_data'
        - 'search'
```

## Complete Examples

### Triage Agent

```yaml
version: '1.0'

agents:
  - id: 'triage-bot'
    name: 'Triage Assistant'
    description: 'Classifies and prioritizes issues'

    system_prompt: |
      You are a triage specialist.

      For each issue:
      1. Classify as: bug, feature, question, task
      2. Set priority: P0-P3
      3. Suggest labels
      4. Explain reasoning

      Be concise.

    model:
      anthropic:
        name: 'claude-sonnet-4-20250514'
        temperature: 0.3
        max_tokens: 1500
```

### Research Agent with Web Search

```yaml
version: '1.0'

agents:
  - id: 'research-bot'
    name: 'Research Assistant'
    description: 'Answers questions using web search'

    system_prompt: |
      You are a research assistant.

      When asked a question:
      1. Search for relevant information
      2. Fetch detailed content from best sources
      3. Provide answer with citations

      Always cite your sources.

    model:
      anthropic:
        name: 'claude-sonnet-4-20250514'
        temperature: 0.5
        max_tokens: 3000
        tool_choice:
          type: 'auto'
        tools:
          - type: web_search_20250305
            name: web_search
            max_uses: 5
          - type: web_fetch_20250910
            name: web_fetch
            max_uses: 10
            citations:
              enabled: true
```

### Multiple Agents

```yaml
version: '1.0'

agents:
  - id: 'triage-bot'
    name: 'Triage Bot'
    system_prompt: |
      You triage incoming issues.
    model:
      anthropic:
        name: 'claude-sonnet-4-20250514'
        temperature: 0.3

  - id: 'docs-bot'
    name: 'Docs Bot'
    system_prompt: |
      You answer documentation questions.
    model:
      anthropic:
        name: 'claude-sonnet-4-20250514'
        temperature: 0.5
        tools:
          - type: web_search_20250305
            name: web_search
```

## Validation

Validate your configuration before running:

```bash
sniff validate
```

Common errors:

<AccordionGroup>
  <Accordion title="Invalid agent.id format">
    Use only lowercase letters, numbers, and hyphens.
    ```yaml
    # ❌ Invalid
    id: "My_Bot"

    # ✅ Valid
    id: "my-bot"
    ```

  </Accordion>

<Accordion title="Missing required field">
  Ensure all required fields are present: `id`, `name`, `system_prompt`, and `model`.
</Accordion>

  <Accordion title="Temperature out of range">
    Temperature must be between 0.0 and 1.0.
  </Accordion>
</AccordionGroup>

## Next Steps

<Card title="Schema Reference" icon="book" href="/schema-reference">
  Complete schema specification with all options
</Card>
